!!!
%html
  %head
    %meta{"name" => "viewport", "content" => "width=device-width, initial-scale=1, maximum-scale=1", "user-scalable" => "no"}
    %meta{'name' => 'description', 'content' => "Resources to learn programming languages for beginners, experts, and freelancers."}
    %meta{'name' => 'keywords', 'content' => "code, coding, programming, language, learning, resources, ruby, python, javascript, coffeescript, css, github, repositories, interview, questions"}
    %title
      What's Next?
    <link href='http://fonts.googleapis.com/css?family=Luckiest+Guy' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,700' rel='stylesheet' type='text/css'>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel='stylesheet' type='text/css'>
    <link href="/favicon.ico" rel="icon" type="image/x-icon" />

  %body
    .container
      .row.header
        .col-lg-1.col-md-0
        .col-lg-10.col-md-12
          %h1 What's Next?
          .lead Resources.for_learning %w(languages and Github projects)
        .col-lg-1.col-md-12

      .row.content
        .col-lg-1.col-md-0
        .col-lg-10.col-md-12
          %script{'type' => 'text/html', 'id' => 'call-to-contribute-template'}
            .call-to-contribute<
              Contribute to these resources
              %a{href: 'https://github.com/matstc/whatsnext.info'}<
                on github
              = "."

          %div{'data-bind' => 'template: {name: "main-template"}'}

          %script{'type' => 'text/html', 'id' => 'main-template'}
            .row
              .col-md-4
                %ul.nav.nav-pills.flex-column.language-list
                  <!-- ko foreach: languages -->
                  %li{'data-bind' => 'css: $root.activeCss($data)'}
                    %a.nav-link{'data-bind' => 'attr: {href: hash}, css: $root.activeCss($data)'}
                      .logo{'data-bind' => 'text: shortName, style: {backgroundColor: color}'}
                      %span{'data-bind' => 'text: name'}
                  <!-- /ko -->
                  %li.about{'data-bind' => 'css: $root.activeCss($root.about)'}
                    %a.nav-link{href: "#/about"}
                      .logo{'data-bind' => 'text: "?"'}
                      %span About

              .col-md-8
                %article.mt-100-sm{'data-bind' => 'if: activeLanguage, visible: activeLanguage'}
                  %h1#section{'data-bind' => 'text: activeLanguage().name'}
                  <!-- ko with: activeLanguage().resources -->
                  %blockquote{'data-bind' => 'html: in_one_sentence'}
                  <!-- /ko -->

                  <!-- ko with: activeLanguage().resources -->
                  .card
                    .card-heading.bg-light
                      %h2{'data-toggle' => 'collapse', 'data-target' => "#for-beginners"}<
                        %i{'class' => 'fa fa-plus'}
                        = "Resources For Beginners"
                    .card-collapse.collapse{'id' => 'for-beginners'}
                      .card-body
                        %div{'data-bind' => 'html: for_beginners'}
                        %div{'data-bind' => 'template: {name: "call-to-contribute-template"}'}

                  .card
                    .card-heading.bg-light
                      %h2{'data-toggle' => 'collapse', 'data-target' => '#for-experts'}<
                        %i{'class' => 'fa fa-plus'}
                        = "Resources For Experts"
                    .card-collapse.collapse{'id' => 'for-experts'}
                      .card-body
                        %div{'data-bind' => 'html: for_experts'}
                        %div{'data-bind' => 'template: {name: "call-to-contribute-template"}'}

                  .card
                    .card-heading.bg-light
                      %h2{'data-toggle' => 'collapse', 'data-target' => '#interview-questions'}<
                        %i{'class' => 'fa fa-plus'}
                        = "Interview Questions"
                    .card-collapse.collapse#interview-questions
                      .card-body
                        %p Here are some questions you should be comfortable with.
                        .p-ish
                          %div{'data-bind' => 'html: interview_questions'}
                        %div{'data-bind' => 'template: {name: "call-to-contribute-template"}'}
                  <!-- /ko -->

                  .card{'data-bind' => 'if: repositories().length > 0, visible: repositories().length > 0'}
                    .card-heading.bg-light
                      %h2{'data-toggle' => 'collapse', 'data-target' => '#repositories'}<
                        %i{'class' => 'fa fa-plus'}
                        = "Most Popular Github Projects"
                    .card-collapse.collapse.in#repositories
                      .card-body
                        %p<
                          These projects are written mostly in
                          %span{'data-bind' => 'text: activeLanguage().name'}<
                          = "."
                        %p
                          Have a look at these projects to hone your skills. Read code. Submit pull requests.

                        %ul.repository-list{'data-bind' => 'foreach: repositories'}
                          %li{'data-bind' => 'striped'}
                            %img{'data-bind' => 'attr: {src:owner.avatar_url}'}
                            %div{'data-bind' => 'rank: "#"', 'class' => 'rank'}
                            .info
                              %h3.name
                                %a{'data-bind' => 'text: name, attr: {href: html_url}'}
                              %span{'data-bind' => 'text: description'}
                              .star-count
                                %span.label.label-success
                                  %span{'class' => 'glyphicon glyphicon-star'}
                                  %span{'data-bind' => 'text: stargazers_count'}

                %article{'data-bind' => 'visible: onAbout()'}
                  %h1 Get Learning
                  %p
                    This is a collection of resources for
                    %b beginners
                    so they know where to look first.
                    It's also for
                    %b experts
                    so they can find resources to dig deeper.
                    And for
                    %b freelancers
                    to figure out what they should learn next.

                  %p What's next? Pick a language and get learning!

                  %h2 The Resources
                  %p The resources listed on this site are chosen for their high quality. They also have to be:
                  .p-ish
                    %ul
                      %li Free to use
                      %li Online (no offline books)
                      %li Weighty (not just a single blog post)

                  %p The resource listings are short to maintain quality. They should also be ordered by difficulty so you can pick them up one by one.

                  %h2 Contributing
                  %p Want to add a new language to the list? Or add your favorite resource?
                  %p
                    Check out
                    %a{href: 'https://github.com/matstc/whatsnext.info'}
                      whatsnext.info
                    on github and submit a pull request.

                  %h2 Contributors
                  .row(data-bind='foreach: contributors')
                    .col-xs-6.col-sm-4
                      .thumbnail
                        %a(data-bind='attr: {href: html_url}')
                          %img(data-bind='attr: {src: avatar_url}')
                          .caption
                            %strong.login(data-bind='text: login')
                            %br
                            %span.contributions
                              <!-- ko if: contributions > 1 -->
                              %span(data-bind='text: contributions + " contributions"')
                              <!-- /ko -->
                              <!-- ko if: contributions == 1 -->
                              %span(data-bind='text: contributions + " contribution"')
                              <!-- /ko -->


                  %h2 License
                  %p<
                    This project is under a
                    %a{href: 'https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US'}<
                      Creative Commons BY-NC-SA license
                    = "."

        .col-lg-1.col-md-0

  %script{src: 'bundle.js', defer: 'defer'}
  = haml :analytics, locals: {tracking_id: ENV['TRACKING_ID']}
